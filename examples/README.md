# Примеры использования библиотеки PochtaRossiiApi

Этот каталог содержит примеры использования библиотеки для работы с API Почты России (otpravka.pochta.ru).

## Настройка

Перед запуском примеров убедитесь, что:

1. Установлены все зависимости: `npm install`
2. Создан файл `.env` на основе `env.example` с вашими учетными данными
3. Получены токен и ключ авторизации на https://otpravka.pochta.ru/

## Примеры

### 1. basic-usage.ts
**Описание**: Базовый пример использования библиотеки с демонстрацией основных возможностей.
**Что демонстрирует**: 
- Инициализация клиента
- Получение токена приложения
- Обработка ошибок
- Базовая структура работы с API

**Запуск**: `npm run example:basic`

### 2. real-usage.ts
**Описание**: Реальный пример использования с переменными окружения.
**Что демонстрирует**:
- Загрузка конфигурации из `.env` файла
- Получение токена приложения
- Проверка авторизации
- Получение настроек аккаунта

**Запуск**: `npm run example:real`

### 3. orders-test.ts
**Описание**: Полный тест всех методов работы с заказами.
**Что демонстрирует**:
- Создание заказа
- Получение списка заказов
- Поиск заказа по ID
- Обновление заказа
- Перемещение заказа в отложенные
- Удаление заказа

**Запуск**: `npm run example:orders`

### 4. tariff-calculation.ts
**Описание**: Примеры расчета тарифов для различных типов отправлений.
**Что демонстрирует**:
- Расчет стоимости для посылок, писем, бандеролей
- Различные категории отправлений (обычные, заказные, с объявленной ценностью)
- Учет дополнительных услуг (уведомления, хрупкость)
- Вывод цен в рублях (деление на 100)

**Запуск**: `npm run example:tariff`

### 5. postoffice-search.ts
**Описание**: Поиск почтовых отделений различными способами.
**Что демонстрирует**:
- Поиск по координатам (широта/долгота)
- Поиск по адресу
- Поиск по индексу
- Универсальный метод с лимитами
- Красивое форматирование результатов

**Запуск**: `npm run example:postoffice`

### 6. coordinates-test.ts
**Описание**: Тестирование поиска почтовых отделений по координатам.
**Что демонстрирует**:
- Поиск ОПС по GPS координатам
- Обработка результатов поиска
- Вывод информации о найденных отделениях

**Запуск**: `npm run example:coordinates`

### 7. count-request-test.ts
**Описание**: Тестирование метода подсчета запросов к API.
**Что демонстрирует**:
- Получение статистики использования API
- Отображение лимитов и текущего использования
- Визуализация процента использования

**Запуск**: `npm run count`

### 8. normalization-test.ts
**Описание**: Комплексное тестирование всех методов нормализации.
**Что демонстрирует**:
- Нормализация адресов (5 различных форматов)
- Нормализация ФИО (полные и сокращенные формы)
- Нормализация телефонов (различные форматы номеров)
- Пакетная обработка данных
- Обработка ошибок для каждого типа нормализации

**Запуск**: `npm run normalize`

## Структура примеров

Каждый пример содержит:
- Импорт необходимых модулей
- Инициализацию клиента API
- Демонстрацию конкретных методов
- Обработку ошибок
- Вывод результатов

## Переменные окружения

Создайте файл `.env` со следующими переменными:

```env
POCHTA_ROSSII_TOKEN=ваш_токен_здесь
POCHTA_ROSSII_KEY=ваш_ключ_здесь
POCHTA_ROSSII_DEBUG=true
```

## Получение учетных данных

1. Зарегистрируйтесь на https://otpravka.pochta.ru/
2. В личном кабинете получите токен и ключ авторизации
3. Добавьте их в файл `.env`

## Обработка ошибок

Все примеры включают обработку ошибок API:
- Ошибки авторизации (401, 407)
- Ошибки сервера (500)
- Ошибки валидации (400)
- Ошибки "не найдено" (404)

## Отладка

Для включения подробного логирования запросов и ответов установите:
```env
POCHTA_ROSSII_DEBUG=true
```

Это поможет отладить проблемы с API и понять структуру запросов/ответов.

## Примечания

- Цены в API возвращаются в копейках, поэтому в примерах они делятся на 100 для отображения в рублях
- Некоторые методы могут возвращать ошибки 500 или 407 при тестировании - это нормально для тестовой среды
- Для работы с реальными данными используйте продакшн-окружение API 